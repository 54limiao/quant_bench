# 量化配置: RTN W8 Weight-only
name: rtn-w8-weightonly
description: 使用 RTN 算法进行 W8 Weight-only 量化

# 输入模型路径 (会自动替换为转换后的模型路径)
input_model: PLACEHOLDER_TRANS_OUTPUT

# 输出模型路径 (会自动添加后缀)
output_suffix: -rtn-W8-weightonly

# Calibration 数据集配置
calibration:
  dataset_id: /dataset/workspace/lim42/datasets/ultra_chat_200k/
  dataset_split: train_sft
  num_samples: 512
  max_sequence_length: 2048

# llmcompressor 标准 recipe
recipe:
  quant_stage:
    quant_modifiers:
      QuantizationModifier:
        ignore: ["lm_head", "re:visual.*", "re:model.visual.*"]
        config_groups:
          group_0:
            weights: {num_bits: 8, type: int, symmetric: true, strategy: channel}
            input_activations: {num_bits: 8, type: int, symmetric: true, strategy: tensor, dynamic: false}
            targets: [Linear]

# 是否保存压缩版本
save_compressed: false